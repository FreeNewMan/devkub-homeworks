# Домашнее задание к занятию "12.4 Развертывание кластера на собственных серверах, лекция 2"
Новые проекты пошли стабильным потоком. Каждый проект требует себе несколько кластеров: под тесты и продуктив. Делать все руками — не вариант, поэтому стоит автоматизировать подготовку новых кластеров.

## Задание 1: Подготовить инвентарь kubespray
Новые тестовые кластеры требуют типичных простых настроек. Нужно подготовить инвентарь и проверить его работу. Требования к инвентарю:
* подготовка работы кластера из 5 нод: 1 мастер и 4 рабочие ноды;
* в качестве CRI — containerd;
* запуск etcd производить на мастере.


```
devuser@devuser-virtual-machine:~/home_works/12-kubernetes-04-install-part-2/kubespray/12_kubespray_1/kubespray$ ansible --version
ansible [core 2.12.5]
  config file = /home/devuser/home_works/12-kubernetes-04-install-part-2/kubespray/12_kubespray_1/kubespray/ansible.cfg
  configured module search path = ['/home/devuser/home_works/12-kubernetes-04-install-part-2/kubespray/12_kubespray_1/kubespray/library']
  ansible python module location = /home/devuser/.local/lib/python3.8/site-packages/ansible
  ansible collection location = /home/devuser/.ansible/collections:/usr/share/ansible/collections
  executable location = /home/devuser/.local/bin/ansible
  python version = 3.8.10 (default, Mar 15 2022, 12:22:08) [GCC 9.4.0]
  jinja version = 2.11.3
  libyaml = True
```

```
git clone https://github.com/kubernetes-sigs/kubespray
# Установка зависимостей
sudo pip3 install -r requirements.txt

# Копирование примера в папку с вашей конфигурацией
cp -rfp inventory/sample inventory/mycluster
```

```
Создаем машины
devuser@devuser-virtual-machine:~/home_works/12-3-install-kub-1$ . list-vms.sh 
+----------------------+-------+---------------+---------+---------------+-------------+
|          ID          | NAME  |    ZONE ID    | STATUS  |  EXTERNAL IP  | INTERNAL IP |
+----------------------+-------+---------------+---------+---------------+-------------+
| fhm8gsa03s6lf8ahq964 | node1 | ru-central1-a | RUNNING | 51.250.91.66  | 10.128.0.27 |
| fhmpaaddh9ugv58qjvef | cp1   | ru-central1-a | RUNNING | 51.250.80.230 | 10.128.0.22 |
+----------------------+-------+---------------+---------+---------------+-------------+

Генерим файл настроек хостов

declare -a IPS=(51.250.80.230 51.250.91.66)
CONFIG_FILE=inventory/mycluster/hosts.yaml python3 contrib/inventory_builder/inventory.py ${IPS[@]}

```

```
Вносим изменения в полученный файл
all:
  hosts:
    cp1:
      ansible_host: 51.250.80.230
      ansible_user: yc-user
    node1:
      ansible_host: 51.250.91.66
      ansible_user: yc-user
  children:
    kube_control_plane:
      hosts:
        cp1:
    kube_node:
      hosts:
        node1:
    etcd:
      hosts:
        cp1:
    k8s_cluster:
      children:
        kube_control_plane:
        kube_node:
    calico_rr:
      hosts: {}

```


```
Для доступа извне прописываем в k8s-cluster.yml

supplementary_addresses_in_ssl_keys: [51.250.80.230]
```

```
Запускаем плейбук

ansible-playbook -i inventory/mycluster/hosts.yaml cluster.yml -b -v
```

```
После установки заходим на мастер ноду кластера делам доступ не из под root

devuser@devuser-virtual-machine:~/home_works/12-3-install-kub-1$ ssh yc-user@51.250.80.230
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-117-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Wed Jun 15 16:23:58 2022 from 90.151.87.170

yc-user@cp1:~$ {
>     mkdir -p $HOME/.kube
>     sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
>     sudo chown $(id -u):$(id -g) $HOME/.kube/config
> }

```

```
Проверяем 

yc-user@cp1:~$ kubectl get nodes
NAME    STATUS   ROLES           AGE   VERSION
cp1     Ready    control-plane   35m   v1.24.1
node1   Ready    <none>          34m   v1.24.1

```

```
Забираем креды из конфига мастер ноды чтобы прописать их на локальной машине (certificate-authority-data, user )

yc-user@cp1:~$ sudo cat /etc/kubernetes/admin.conf
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EWXhOVEUyTVRBd04xb1hEVE15TURZeE1qRTJNVEF3TjFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTHU5CjU2dm5oRldpUDg2QTd6RU9ZbTg3RXZMcHY4VFM3TWN1UXUxbnRrK0FhYXBGeXhJaTc2RVlXbTlnRkx1dGQ0QTEKeXM4bXE3K1FWcVVwd25EcStDYXFyZHhXOEM2T0Z4eU9JWFJXakJVMEd3SmlHejFvWHJDZ1R2U3RGdUQyL2RrSApKU0VHN3J4bmU4VGM2YnBBZDlCL3E0OE1LSnpIN25JMnNHR3czckdsNVRFYTlscTBDeTlPTWhzSTVGa0NSOW5XClJxckF5aDZRKzBJbkh4UGZ4VWhkSllzc1puR0piTS9JNkRTUlZPQWNMcnl4TEIwSURjejNrVUV1MGFlYWVqanYKMkNUSmI0N2dFQ3dLK0FSMkRCSU9MYjh4bk1qTzJmWHE5dUsvRHZuYmcvNUFBRHFEK2piQThLN2srS29reEVzcgppVFNzWHlkM1NXOHNObGU5SVdNQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZNQVZnUzRHaEZ5bnV0Y1l1eVo3NklsZVRxRkFNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBTE1IZThVOGdGeUNIS3FJUktkbgpyRW1GdnFkeUZrSWFaWk5WYmxZZUtWUHdHN3N1RGkvUFpnaFQ5czRndlZTY0VTRmNlMEllN1FEaVQxZk9xVEZ4CldrZm5uRjBHbEc4VmxUR3RXOFk1QVNEclpOY2IxVitHb0U2SDlWSW1WTWY4K1ExMmFKRFcvK1cvZEFSbExFQkQKaS9NSFRxaDZuQ1hLVzFaZEM5R2NFNmIrWFRub29sK3MxVkR6ak5JN1JNVU9jOEg2MUYxaFZpcVA0ZTJtNkNFbgpHS1gwaTkvQTYzNm4zMFFiR1FjWTJHNGlFTXR3MDVHWDV6d3BIaFY3T1J1ek5MaDF1bWxIbmVsc01vZHI2OHZ1Ck5NNjk4TnNscFh1UDl5OXgweGMwOGtnaUJEMzdya3pRdzlYQ2RnRnIybm9oNWJsYW1sR3RzM3JQdkZBRlVrQ0EKK0FVPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://127.0.0.1:6443
  name: cluster.local
contexts:
- context:
    cluster: cluster.local
    user: kubernetes-admin
  name: kubernetes-admin@cluster.local
current-context: kubernetes-admin@cluster.local
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJRkhPRFNCRktTUFF3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBMk1UVXhOakV3TURkYUZ3MHlNekEyTVRVeE5qRXdNRGhhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTFGTkI2b3FmTDVjU1FXUGcKT09NRzlvYlh5bkdKQzF0KzNNTVNkUXo0VThTRmpEa3NxMDFQbXdDUXI4U2ZjN2hqcVMxSEV1NllGb0RrRWdJcwplSUFSRmhna2s0TDlONHdjZmVPSGU5U3VOWUo1R01nQ3VTc0daVVVtVG1pQnVsdzAwMnZoRWtCY3hTQUxvRm9iCkRiZUlBc1U0c2RKdlE2V09FTEVRZHl1QUdwcGlsNjRRTGM4ajRYNHJuK1dUTkx6Y2hoVmRubDhmNE1hS0dQYnEKYXU3cHR0aGxrRzlOdjR0OUVaRGN0QUFVbXd3SHlKd3RCVS9aN2JNQUI4L3UwdkdJN2xReHRscXgza2lYUkVOSApjbElneUljMU5veFRrbmM1T3YvcTkvZmUwekxIS215c2VTbFZpYmtxRXczeVc3aUgvR3I1S0RJOWJKakJnWEZxCkJEQ0R6UUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JUQUZZRXVCb1JjcDdyWEdMc21lK2lKWGs2aApRREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBdHR5M3BxSnBkQ1ZJU0JxcWQ2dzRzcXFkcVloaExVVXQxTExoCnlUbDk3UnJKVXpxVkhRakJraHlHWWszT0FockllVGs4Y2RIdWdoUHRPNVRKZnNGM1k1ZGwwaVUzekpFQ3Q0MDEKUWxodVdBcEdxMi9LU0VvdXdCemF2MDFub3ludllCcktnZlJKOUZ1aitUWEsxaG12M2ErS3BCSUl4TjF1SzFybwp1Y1d3eXhIaGI4MDFEQ3QxQ1NRbnIwUG9yNHZGV2VyK2hsalhsRlRQUUxHQUVwNm9FRjRhR1NWNmFMQ0lCNmFRCnRHRXp0WmhGNE51ckQzcnRzdS94NzJCZldyb2xubXd5WWVXQ3Zsa1dYVXJrb3A1T094cWRLYVYvckhmMUlla0MKOEVJQU9Hd3RneFp6Vy9Hb3p1VE1reEYwZng0WW50Z3NxN09JOXJaRnFiTjFXeThzMEE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBMUZOQjZvcWZMNWNTUVdQZ09PTUc5b2JYeW5HSkMxdCszTU1TZFF6NFU4U0ZqRGtzCnEwMVBtd0NRcjhTZmM3aGpxUzFIRXU2WUZvRGtFZ0lzZUlBUkZoZ2trNEw5TjR3Y2ZlT0hlOVN1TllKNUdNZ0MKdVNzR1pVVW1UbWlCdWx3MDAydmhFa0JjeFNBTG9Gb2JEYmVJQXNVNHNkSnZRNldPRUxFUWR5dUFHcHBpbDY0UQpMYzhqNFg0cm4rV1ROTHpjaGhWZG5sOGY0TWFLR1BicWF1N3B0dGhsa0c5TnY0dDlFWkRjdEFBVW13d0h5Snd0CkJVL1o3Yk1BQjgvdTB2R0k3bFF4dGxxeDNraVhSRU5IY2xJZ3lJYzFOb3hUa25jNU92L3E5L2ZlMHpMSEtteXMKZVNsVmlia3FFdzN5VzdpSC9HcjVLREk5YkpqQmdYRnFCRENEelFJREFRQUJBb0lCQVFDNnhSWVpxNkRGcXgxSwoyZ0ZWNlJhcDZ3bU5NZnY4T3BySXRPdmFmUE5BTklISlRFM256ZFQxb3pTaStOSE9hR2Q2WExMRmk0M0xWY3ZKCnI1SFEyYzZ0NGNUaTRYbSswQWdNRVFhUHZoRVVUdFlaSDIrTjFMUUdoeUpnSEh2cEk4endJVmhWeHJvVVNORVIKVjlHdWFrQkJONTFjaHFDTEgrbHM4MlJwZjZGclE4RTZZSHNyRkVwSERBODlwT0Jzc3NzVlJrSFBoUUtldG1YQQpOQzMzWnFVOHAvNERLTXFTWkRwZ1UwT1FhUjlZNEgzWXpsQUlMaURjZXA3WFEzVUFxS1dIU0MrQmRJV29uY29mCkpwWTgyYk5YVGVBV0MwR1MzL3RZcHF1V2EwMithc2V3ckVGZmJsNzBFWGc1TG9xaGE1VDMwWTJZdjkrMWNYclgKQmVaemQxSTlBb0dCQVA1QmtJekxpSW9yVEdRSXk1a3BqbG95eUlyM0JtZGw0UzRSTmxwTHJrdmlVR2dNUDNVNQpUZzlVa3Z4eHhmYWF4SFFGbGF3dEpKd2tmOE5KWXF2U1I2YWdHNWgra3lSbG1YQ09USzlpTGtEU2k5UGNCUDNxCmM2RlJ2MzVQOXU4c3ZzbmdGNk9GUWl5M2N4ODl1RWo1cXhBeXExRURnR0JNaHI1K1NwbCtkVEhYQW9HQkFOWEkKRVlzUEx6YmNaNmNNNDc4N3ZteFZ2SXVUenZVTENSUUNSZEZZRVdueHNTcG01YXBvUU1ZRlM5WTdyYTJBVVd4aQpsalE1RTYzU1BsK0FZRVJrV292Vk1BTGVEUi9CV0VaeHJpL3NTNXZzNWxzL2dYUFJGVkx4M0s1NjJOVHRjWlluClk0aVdlUFFuTXhEbzQwNXlmSkFUcGQ0MktHZkVFNkI5VERtZEU4cjdBb0dCQUxZQ3MzckczUmlrQkV4OEsxdWEKYndoTTRGanltMGY3bTZaQnRob1BvVmM3VEhvZmduSGxNdWN3a1FSY1llMjJQem9iSVZrZSs5MDNGNnJ4NXN1LwpmWUZmamtHdElxSmtoT0laUy9ZbEg1MVIyNzB1L1BmVUZUQi9kOGp4YjRFcUUrNHFHR0g3ckRLY3BMSFJtaEhMCmdOVFlvT0VlMDVDY1Y3MFlaVWphU1FVREFvR0FhTVA4UE82N0Q2S2h0VTd1eVlmSXdTU2ZHclBiNTJCNkdYRW4Kci9qOXg3S25SUVZhSmRHamRLZWh5NkpCY2RhQmtLRWJ4UW4zcCtaeHBMR3YrN1JHWDJLaGZiWStMa0s5TlFCLwpBWU5HWm1xSlZVeGc3MVlXb2loZklxNlhWbm5xZ1ZCYVNkU2IvK0s1OXQ1NmpyWXlieFVCNDAwZExnVDhMVmxhCklwM2sxa01DZ1lFQTYyRUVMUmI2L01yeFcrUkFjNkR2ekkydHRaaFJRY3dsTktncFpkNUdhUEQ5TlZweHd4OXgKOTN0dWxxelNRV0RHZDh5QnRjaHhWUmtQY2JIUFg5VC9yV1JVSEkxMXRVL1JlZThJbFowSElId1I3MEFmbVBFYQpFcHpmcStZV0E5N1JPK0RJK2VUT0tuaHgvWVpBNHRyMHdIVmdNUUNibVZBeTRUOC9DMDloQkl3PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
```


```
devuser@devuser-virtual-machine:~/home_works/12-3-install-kub-1$ cat ~/.kube/config
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EWXhNekV4TWpRek5Wb1hEVE15TURZeE1ERXhNalF6TlZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS3pVCnV0bHdqT3JxQUNzS2M5ZEN5M3ltQVNDYmk4RTNBcnB2Vk9ETDZ6RUl3YURMd1h3bmVQVjA3d2pvN3JQNmNVM3gKazc0cEQyRmgySmdHaXRHMmYxRnF2SW5nUjJpSHFzekRaSjd6Z2dHTlZFNWNpMEVUSHhxZTZ3MFlPSlhwaWdGNgpQOXBPR1YzZk9mWTEwTFZyZ1g5VzJoQjNTTm9Db3RpU2dEWjFRWTJ1R2ZpYVVXZkdmVFBMc1BUNUwreHFGRWVhClpDazU5VHhFNHh1alJnb1BtVTBCeVMyQzlVS09TejZXaHVmb01qNCthMitiR0dvdWh6U0RSZTdGYnIxdjRnVUYKNVQ0dCs2L09zeUhIRmVkV0JIMmJkaFIyTm9KQTN2dng4dm84aGwzR21ucGQ2emt4cHRTckR0d29PSnUyYjFDSQp0dTRBbDEvbW11elFFYlV1ck1jQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZDU3YvdGxKQlh0N0kwT0lxa3pVSDhnS1lFOWpNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBQUFCWFAzNXVmQVFVemdWMEZ0bgpoMDkxa25YK3p3aGF6azVzaytkdGpOVUhjdUc4eUtuTFNicjhOVnYxVHpCK0pzNDBZbEhPSFEyS21ZVHVkODRJCmdtZ0Fsd3FZOUhlMUFWcFVSM2pxTjFkMkYyK3VNRXpzNFNLM2dpYTN5MmVwdWhzSXZ1Q3JmL01HaE9WMFpoTzAKa2pZNUpEcVhrN0x0Q0pEUWx6MFZPUGdPVDN6bjViZm5oL05KS0gwc1BYdjdQQ0lxM09ZTm5VMGpOdTMvYXJobQptU2JoVHE5YkNYZ29VUVhEbmlxVXJyQnBPM1lWNkIwMkpqSWM0Njl3VE9OYkNZVVhlK2tFQVVNRFJMa2t1RU9HClFvS0NEVmN4cm91ZVd0T0lOajFFajhYaEhyeTNiUFBFT3Y0amk0WHIrUzc5MVRSR1o3K1BobXpmNlZnWEtKUlIKbzV3PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://51.250.91.122:6443
  name: netology
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EWXhOVEUyTVRBd04xb1hEVE15TURZeE1qRTJNVEF3TjFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTHU5CjU2dm5oRldpUDg2QTd6RU9ZbTg3RXZMcHY4VFM3TWN1UXUxbnRrK0FhYXBGeXhJaTc2RVlXbTlnRkx1dGQ0QTEKeXM4bXE3K1FWcVVwd25EcStDYXFyZHhXOEM2T0Z4eU9JWFJXakJVMEd3SmlHejFvWHJDZ1R2U3RGdUQyL2RrSApKU0VHN3J4bmU4VGM2YnBBZDlCL3E0OE1LSnpIN25JMnNHR3czckdsNVRFYTlscTBDeTlPTWhzSTVGa0NSOW5XClJxckF5aDZRKzBJbkh4UGZ4VWhkSllzc1puR0piTS9JNkRTUlZPQWNMcnl4TEIwSURjejNrVUV1MGFlYWVqanYKMkNUSmI0N2dFQ3dLK0FSMkRCSU9MYjh4bk1qTzJmWHE5dUsvRHZuYmcvNUFBRHFEK2piQThLN2srS29reEVzcgppVFNzWHlkM1NXOHNObGU5SVdNQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZNQVZnUzRHaEZ5bnV0Y1l1eVo3NklsZVRxRkFNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBTE1IZThVOGdGeUNIS3FJUktkbgpyRW1GdnFkeUZrSWFaWk5WYmxZZUtWUHdHN3N1RGkvUFpnaFQ5czRndlZTY0VTRmNlMEllN1FEaVQxZk9xVEZ4CldrZm5uRjBHbEc4VmxUR3RXOFk1QVNEclpOY2IxVitHb0U2SDlWSW1WTWY4K1ExMmFKRFcvK1cvZEFSbExFQkQKaS9NSFRxaDZuQ1hLVzFaZEM5R2NFNmIrWFRub29sK3MxVkR6ak5JN1JNVU9jOEg2MUYxaFZpcVA0ZTJtNkNFbgpHS1gwaTkvQTYzNm4zMFFiR1FjWTJHNGlFTXR3MDVHWDV6d3BIaFY3T1J1ek5MaDF1bWxIbmVsc01vZHI2OHZ1Ck5NNjk4TnNscFh1UDl5OXgweGMwOGtnaUJEMzdya3pRdzlYQ2RnRnIybm9oNWJsYW1sR3RzM3JQdkZBRlVrQ0EKK0FVPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://51.250.80.230:6443
  name: netology2
contexts:
- context:
    cluster: netology
    namespace: kube-system
    user: netology-user
  name: netology
- context:
    cluster: netology2
    namespace: kube-system
    user: netology-user1
  name: netology2
current-context: netology2
kind: Config
preferences: {}
users:
- name: netology-user
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJWlkxZmM5bW5wb1F3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBMk1UTXhNVEkwTXpWYUZ3MHlNekEyTVRNeE1USTBNelphTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXk4aGk3aXlteVNDOGVGSXoKWldsUi94Y0xrZitRZ0k4RWQ3a3FUU2NaczdTM3FJTkZySkxIZjdOSGNvcUJOOFovUHdPeTltbXdNMTNsOFR4OAo3OE01ZVNqbjQ2VlBsblY3djF3T3NKY0tPOTRWV0RJUnhSSE1PQ1RiaXMxQU5oTGEzQXJwZXV5eWhnTHB5aElnCjJKeDdHQTlLZEQ3WDY5UExzWFBZM0xQWTJEeVBiaENjdFViZytwdmJLQnl5RGFMOGo2VEhBbkVoS3hTdFBEeEMKd1FoS2FyVlhwdWpGd3h3dEZDV3g4VHFsNkpMSE85WCsvdFhRdi82VGhaU05TQUhEREVlaDh0VnliT1UreHZTUgprby8rVGtWYlZ4OWE1TXI4SU0rcDBEMnRkSmxvUHFVeXNPOXR5d0w4Z1FidVBiOElMSTdDYmdxU25zOWxKZUNZCmRQck1Qd0lEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JRa3IvN1pTUVY3ZXlORGlLcE0xQi9JQ21CUApZekFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBbG4zdTFSbm4zcTlJSGlFS2Q3WjdHQ3VOREtUMVdDd3c1Rm9LCjZJYjNTT093WXVUcUdjLzd6Q1dLUTRib04ydEZvWXZ4Tmd2ZkhuNXZncStneDcrcElMMGJSeWEzdXU2VEt2L08KQk9sK3F0eHRsa3hDdXRNc29aa0ZVc3ZDKzN3bDlsazNuamF5QndrVHJVMWlMZENqSTFWcStPZXp6SVBPTStLWgpTWVFOMDg1WTVhYmdZajlTYTVVbU9GYTNiK2dkSWVkVGNneitNY0trNkI3K1d5WkNvZ2Juc2VKd3hsSzRJTDlMCmR6Rmo2TlloM3Z0cllXdzFIb3dIWTJxc1A1c0RxcFVGSHJZUnlOcXpDZkd3bmRPTXFnWVFCZXpER3pISVZycEUKVGRkS0FLUkFGdGNvMGQweHJQSjZZZWhzV0NKS0cyZll1akExOXNoc2dVd3RrMUowdmc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeThoaTdpeW15U0M4ZUZJelpXbFIveGNMa2YrUWdJOEVkN2txVFNjWnM3UzNxSU5GCnJKTEhmN05IY29xQk44Wi9Qd095OW1td00xM2w4VHg4NzhNNWVTam40NlZQbG5WN3Yxd09zSmNLTzk0VldESVIKeFJITU9DVGJpczFBTmhMYTNBcnBldXl5aGdMcHloSWcySng3R0E5S2REN1g2OVBMc1hQWTNMUFkyRHlQYmhDYwp0VWJnK3B2YktCeXlEYUw4ajZUSEFuRWhLeFN0UER4Q3dRaEthclZYcHVqRnd4d3RGQ1d4OFRxbDZKTEhPOVgrCi90WFF2LzZUaFpTTlNBSERERWVoOHRWeWJPVSt4dlNSa28vK1RrVmJWeDlhNU1yOElNK3AwRDJ0ZEpsb1BxVXkKc085dHl3TDhnUWJ1UGI4SUxJN0NiZ3FTbnM5bEplQ1lkUHJNUHdJREFRQUJBb0lCQUE3K1lYa1F3L3pNY2RHUQppc09OYWtFUW13TlZBSGJWRHdrWUVLcTRrOFdMS0hBM3FHcTRLZ0dWV1U1dUxtL0NKUjZuMFFVY1phQ0I2aWRECndoV0tFYkorZGdGajZtVXhvN2RDdUxuNWd3RkFwK1ZqV2JkY1JlQmpwZHVpbW5UZ0VrWmFieTlpTndoeE1tNXgKd3dUdERvbUlwbnZERy9QNEUyYXRGV20zdWQ2L0JGZXBlRzdXWk1LZlEydDdiQXpvSXd4MlEzSFZaTDF0djhYUApSMmhRRjB1M3M0Zkh6dDV2VXY1aUkydVhHMEwzRnVRREJoc2xVRnAxS2tTc0xsSjRFNzA0dHFXblRaR0ttd2FLCklmRmVrelRHWXdxaHVod1dDWmhUSGMvaUg2amdyY0QvTS9nTjZmd0F5bW5YZjJWWUFWT2JkQ0xTNjlPelI4UlMKY0Z2Q2xSRUNnWUVBM3VpdXgydkRiakx0UDJDMDJhTWEzSDlCczV1RU1HbjNxU3gvUnNvcTVzYzFZUCtvQUxKZQplTHE4MlJDS2ZEdTAydlNybDZQWUFTcmdFaS9jb0pkbnJIUGJjQ0RmYmVRY1ZUM296TTBXa1YvQnNsYTZmclFVCm5vN1FJem0zU2Q2QjFZUXZPWmEveEp3RGt1a1FvSVZHMzU5Tk9ZUVhJRmoya0ZHcnpuYWYrTjBDZ1lFQTZnalgKeTBvMmZUem5UbkMzMHVDWURmdExNTFBjanVzOXA5Q0JXa1lhQ2UwOTlaNTVwZFhvTlBMaXdKT3QvblRKQTEzawpoL0dWNHlHNklHYXU4K0FtUEIwNjAvQURPYStJQVpQUW1jdC94QWluKzhTUzV5TUI0RjFtdWJhemJ3QWwzN25oCkRySTkvano0NmROU1M4UEJtWEVUcmI1Y2JJR1JTMWpRYWEyQWVjc0NnWUVBcm04ZFhyY0l2dktoVDZoSXZjcnkKV1R4SVdObkpEdTNOdlpneG5WN1ZSYlQ4STRUTW5vYjJnTGw0ME5BdDN0d0dRaFdYTmRva1RYMlV6UWFoT3haZwpMY2FZSU4zSW1rRVludWdNaGoremVsMlp3UW8zZExGTk5Xc0NtNTR0dldPZTdFdzlmRzVvY04yNXVqd2lJOHRICjAvVGdSTE1HT2UwRVBabDd2ZHg4Z1EwQ2dZQUh5T3VFczU5RVl6WStnYmxicG1Ub2NpZDZJMEYrNzR4SmZNSVEKd3F3ekVGVXpTbVk1Z2ZnTGF0am9Gd0YrcVZ2V1pOVXBRSHYvNWl0TzBKdVpPU2VNY0Z4NG1FOURKL2VhTmRTRwppU0ppM3ZiWGhSNXQyZGhDSWxrOGJEdGp3ZG1BcTZvMDF2RUE5LzQvcU92ZjRVOGJUNHVjQiswREh2dzZTV1lGClhlUWNLUUtCZ0ZJb2E0L2lrVWdiT2hOdm1PSWw2ajdnVDVBc01BcFpraHlnZzhBWlEwcUdGZG00d04wMXNhZWkKTCt2UC9lS250Qno3RUZhOTRGZXpINlNWMnZ5YTBCVy9YUHc3Mlh3ZXBSTG0vajR4b1RLQW1WQkl3aFJMOE93TwpWa1poOExHa3JJVWtJM3NMWk9qTitrUEFTaytuZ205LzRHNXdWaGgrQ3B2b21vTWRYUTVwCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
- name: netology-user1
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJRkhPRFNCRktTUFF3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBMk1UVXhOakV3TURkYUZ3MHlNekEyTVRVeE5qRXdNRGhhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTFGTkI2b3FmTDVjU1FXUGcKT09NRzlvYlh5bkdKQzF0KzNNTVNkUXo0VThTRmpEa3NxMDFQbXdDUXI4U2ZjN2hqcVMxSEV1NllGb0RrRWdJcwplSUFSRmhna2s0TDlONHdjZmVPSGU5U3VOWUo1R01nQ3VTc0daVVVtVG1pQnVsdzAwMnZoRWtCY3hTQUxvRm9iCkRiZUlBc1U0c2RKdlE2V09FTEVRZHl1QUdwcGlsNjRRTGM4ajRYNHJuK1dUTkx6Y2hoVmRubDhmNE1hS0dQYnEKYXU3cHR0aGxrRzlOdjR0OUVaRGN0QUFVbXd3SHlKd3RCVS9aN2JNQUI4L3UwdkdJN2xReHRscXgza2lYUkVOSApjbElneUljMU5veFRrbmM1T3YvcTkvZmUwekxIS215c2VTbFZpYmtxRXczeVc3aUgvR3I1S0RJOWJKakJnWEZxCkJEQ0R6UUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JUQUZZRXVCb1JjcDdyWEdMc21lK2lKWGs2aApRREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBdHR5M3BxSnBkQ1ZJU0JxcWQ2dzRzcXFkcVloaExVVXQxTExoCnlUbDk3UnJKVXpxVkhRakJraHlHWWszT0FockllVGs4Y2RIdWdoUHRPNVRKZnNGM1k1ZGwwaVUzekpFQ3Q0MDEKUWxodVdBcEdxMi9LU0VvdXdCemF2MDFub3ludllCcktnZlJKOUZ1aitUWEsxaG12M2ErS3BCSUl4TjF1SzFybwp1Y1d3eXhIaGI4MDFEQ3QxQ1NRbnIwUG9yNHZGV2VyK2hsalhsRlRQUUxHQUVwNm9FRjRhR1NWNmFMQ0lCNmFRCnRHRXp0WmhGNE51ckQzcnRzdS94NzJCZldyb2xubXd5WWVXQ3Zsa1dYVXJrb3A1T094cWRLYVYvckhmMUlla0MKOEVJQU9Hd3RneFp6Vy9Hb3p1VE1reEYwZng0WW50Z3NxN09JOXJaRnFiTjFXeThzMEE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBMUZOQjZvcWZMNWNTUVdQZ09PTUc5b2JYeW5HSkMxdCszTU1TZFF6NFU4U0ZqRGtzCnEwMVBtd0NRcjhTZmM3aGpxUzFIRXU2WUZvRGtFZ0lzZUlBUkZoZ2trNEw5TjR3Y2ZlT0hlOVN1TllKNUdNZ0MKdVNzR1pVVW1UbWlCdWx3MDAydmhFa0JjeFNBTG9Gb2JEYmVJQXNVNHNkSnZRNldPRUxFUWR5dUFHcHBpbDY0UQpMYzhqNFg0cm4rV1ROTHpjaGhWZG5sOGY0TWFLR1BicWF1N3B0dGhsa0c5TnY0dDlFWkRjdEFBVW13d0h5Snd0CkJVL1o3Yk1BQjgvdTB2R0k3bFF4dGxxeDNraVhSRU5IY2xJZ3lJYzFOb3hUa25jNU92L3E5L2ZlMHpMSEtteXMKZVNsVmlia3FFdzN5VzdpSC9HcjVLREk5YkpqQmdYRnFCRENEelFJREFRQUJBb0lCQVFDNnhSWVpxNkRGcXgxSwoyZ0ZWNlJhcDZ3bU5NZnY4T3BySXRPdmFmUE5BTklISlRFM256ZFQxb3pTaStOSE9hR2Q2WExMRmk0M0xWY3ZKCnI1SFEyYzZ0NGNUaTRYbSswQWdNRVFhUHZoRVVUdFlaSDIrTjFMUUdoeUpnSEh2cEk4endJVmhWeHJvVVNORVIKVjlHdWFrQkJONTFjaHFDTEgrbHM4MlJwZjZGclE4RTZZSHNyRkVwSERBODlwT0Jzc3NzVlJrSFBoUUtldG1YQQpOQzMzWnFVOHAvNERLTXFTWkRwZ1UwT1FhUjlZNEgzWXpsQUlMaURjZXA3WFEzVUFxS1dIU0MrQmRJV29uY29mCkpwWTgyYk5YVGVBV0MwR1MzL3RZcHF1V2EwMithc2V3ckVGZmJsNzBFWGc1TG9xaGE1VDMwWTJZdjkrMWNYclgKQmVaemQxSTlBb0dCQVA1QmtJekxpSW9yVEdRSXk1a3BqbG95eUlyM0JtZGw0UzRSTmxwTHJrdmlVR2dNUDNVNQpUZzlVa3Z4eHhmYWF4SFFGbGF3dEpKd2tmOE5KWXF2U1I2YWdHNWgra3lSbG1YQ09USzlpTGtEU2k5UGNCUDNxCmM2RlJ2MzVQOXU4c3ZzbmdGNk9GUWl5M2N4ODl1RWo1cXhBeXExRURnR0JNaHI1K1NwbCtkVEhYQW9HQkFOWEkKRVlzUEx6YmNaNmNNNDc4N3ZteFZ2SXVUenZVTENSUUNSZEZZRVdueHNTcG01YXBvUU1ZRlM5WTdyYTJBVVd4aQpsalE1RTYzU1BsK0FZRVJrV292Vk1BTGVEUi9CV0VaeHJpL3NTNXZzNWxzL2dYUFJGVkx4M0s1NjJOVHRjWlluClk0aVdlUFFuTXhEbzQwNXlmSkFUcGQ0MktHZkVFNkI5VERtZEU4cjdBb0dCQUxZQ3MzckczUmlrQkV4OEsxdWEKYndoTTRGanltMGY3bTZaQnRob1BvVmM3VEhvZmduSGxNdWN3a1FSY1llMjJQem9iSVZrZSs5MDNGNnJ4NXN1LwpmWUZmamtHdElxSmtoT0laUy9ZbEg1MVIyNzB1L1BmVUZUQi9kOGp4YjRFcUUrNHFHR0g3ckRLY3BMSFJtaEhMCmdOVFlvT0VlMDVDY1Y3MFlaVWphU1FVREFvR0FhTVA4UE82N0Q2S2h0VTd1eVlmSXdTU2ZHclBiNTJCNkdYRW4Kci9qOXg3S25SUVZhSmRHamRLZWh5NkpCY2RhQmtLRWJ4UW4zcCtaeHBMR3YrN1JHWDJLaGZiWStMa0s5TlFCLwpBWU5HWm1xSlZVeGc3MVlXb2loZklxNlhWbm5xZ1ZCYVNkU2IvK0s1OXQ1NmpyWXlieFVCNDAwZExnVDhMVmxhCklwM2sxa01DZ1lFQTYyRUVMUmI2L01yeFcrUkFjNkR2ekkydHRaaFJRY3dsTktncFpkNUdhUEQ5TlZweHd4OXgKOTN0dWxxelNRV0RHZDh5QnRjaHhWUmtQY2JIUFg5VC9yV1JVSEkxMXRVL1JlZThJbFowSElId1I3MEFmbVBFYQpFcHpmcStZV0E5N1JPK0RJK2VUT0tuaHgvWVpBNHRyMHdIVmdNUUNibVZBeTRUOC9DMDloQkl3PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
```

```
Проверяем доступ с локальной машины
devuser@devuser-virtual-machine:~/home_works/12-3-install-kub-1$ kubectl get nodes
NAME    STATUS   ROLES           AGE   VERSION
cp1     Ready    control-plane   42m   v1.24.1
node1   Ready    <none>          40m   v1.24.1
```

## Задание 2 (*): подготовить и проверить инвентарь для кластера в AWS
Часть новых проектов хотят запускать на мощностях AWS. Требования похожи:
* разворачивать 5 нод: 1 мастер и 4 рабочие ноды;
* работать должны на минимально допустимых EC2 — t3.small.

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
