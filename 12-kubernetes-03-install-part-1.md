# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.

```
Принято не размещать рабочие нагрузки на control plane нодах. для отказоустойчивости их должно быть больше одной и нечетное число, минимум 3
  3 control ноды (на каждой такие параметры: CPU: 2 ядра, ОЗУ: 4 Гб, Диск: 50Гб)


worker ноды: (минимальные значения для worker ноды: CPU: от 1, ОЗУ от 1Гб, Диск: от 100 Гб)
Worker nodes:
БД: ОЗУ: 4ГБ*3=12ГБ, CPU: 3

Кэш: ОЗУ: 4ГБ*3=12Гб, CPU: 3

Фронтенд: ОЗУ: 50МБ*5=250Мб, CPU: 0.2*5 = 1

Бекенд: ОЗУ: 600МБ*10=6Гб, CPU: 10

Итого нужно ресурсов: ОЗУ: 12+12+0.25+6Гб= 30.25Гб ~32ГБ CPU: 3+3+1+10 = 17 

Нода должна быть минимум ОЗУ: 4Гб (+1 гб на kube и на ОС) и 10 штук минимум + 2 запас

 Итого:
   Control plane nodes:  
     - 3 шт ( CPU: 2, ОЗУ: 4Гб, Диск: 50Гб)

   Worker nodes:
     - 12 шт (CPU: 2, ОЗУ: 5Гб, Диск: 100Гб)

```

```
Другой вариант: 
worker ноды: (минимальные значения для worker ноды: CPU: от 1, ОЗУ от 1Гб, Диск: от 100 Гб)
 БД:
   с учетом размещения базы данных на одной ноде получаем: 1+1 ядра, 1+4 ОЗУ, 100 ГБ диск.  
   Итого: 3 ноды: CPU: 2 ядра, ОЗУ: 5 Гб, Диск: 100Гб.   + 1 нода запас
 
 Кэш:
   Итого: 3 ноды: CPU: 2 ядра, ОЗУ: 5 Гб, Диск: 100Гб   + 1 нода запас
 
 Фронтенд:
   50 Мб и 0.2 ядра несущественно, поэтому можно оставить минимальные требования
   Итого: 5 нод:   CPU: 1 ядро, ОЗУ: 1 Гб, Диск: 100Гб   + 1 нода запас

 Бекенд:
   Итого: 10 нод:   CPU: 1+1 ядра, ОЗУ: 1.7 Гб, Диск: 100Гб   + 1 нода запас
 


 Итого:
   Control plane nodes:  
     - 3 шт ( CPU: 2, ОЗУ: 4Гб, Диск: 50Гб)

   Worker nodes:
     - 8 шт (CPU: 2, ОЗУ: 5Гб, Диск: 100Гб)
     - 6 шт (CPU: 1, ОЗУ: 1Гб, Диск: 100Гб)
     - 11 шт (CPU: 2, ОЗУ: 1.7Гб, Диск: 100Гб)

```