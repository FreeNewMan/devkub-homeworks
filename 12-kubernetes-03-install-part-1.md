# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.

```
Принято не размещать рабочие нагрузки на control plane нодах. для отказоустойчивости их должно быть больше одной и нечетное число, минимум 3
  3 control ноды (на каждой такие параметры: CPU: 2 ядра, ОЗУ: 4 Гб, Диск: 50Гб)


worker ноды: (минимальные значения для worker ноды: CPU: от 1, ОЗУ от 1Гб, Диск: от 100 Гб)
Worker nodes:
Общее количество ресурсов: ОЗУ: БД + кэш: (4ГБ * 3) * 2  + Фронтэнд: 50МБ * 5 + Бекэнд: 600МБ*10 = 24Гб + 250Мб + 6Гб = 30,25Гб
                           CPU: БД + кэш: 3*2 + Фронтэнд: 1 + Бекенд: 10 = 17 ядер


Для одного "живого" экземпляра приложения нам нужно: ОЗУ: 4Гб+4Гб + 650Мб ~ 9Гб, CPU: ~ 4 ядра

Добавим ресурсы для самого Kuberа на нодах: ОЗУ: + 1 Гб ~ 10Гб, CPU + 1 ядро = 5 

Добавим запас 20%: ОЗУ 10Гб + 20% = 12ГБ, CPU: 6

Получается, что нужно как минимум 4 рабочие ноды: ОЗУ 12 ГБ, CPU: 6 

Общий ресурс: 48Гб, 24 ядра

Если одна нода выйдет из строя, то останется: ОЗУ: 36 Гб, CPU: 18, то есть 3 другие вытянут полезную нагрузку (~31 Гб, ~17 ядер)


Итого требуется: 
  3 control plane:  ОЗУ: 4Гб, CPU: 2, диск: 50 ГБ

  4 worker node:  ОЗУ: 12Гб, CPU: 6, диск: 100 ГБ
